<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Shower Presentation Engine</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body class="shower list">
    <header class="caption">
      <h1>Redis as a Database for Node.js</h1>
      <p><a target="_blank" href="https://t.me/madmxg">Mikhail Garbuzov</a>, RingCentral</p>
    </header>

    <section class="slide clear">
      <h2 class="shout" style="font-size: 3em">Redis as a Database for Node.js</h2>
      <img class="cover w-2048" src="assets/rc/01-bg.jpeg" />
      <img class="rc-logo" src="assets/rc/01-rc-logo.png" />
    </section>

    <section class="slide intro clear">
      <img src="assets/images/me.jpg" />
      <div>
        <h2 class="">About me üßî‚Äç‚ôÇÔ∏è</h2>
        <h3 style="font-size: 2em; margin-block-end: 0px">Mikhail Garbuzov</h3>
        <ul>
          <li>Software Engineer at RingCentral</li>
          <li>MoscowJS Co-Organizer</li>
          <!-- <li>More than 10 Y experience with JS</li> -->
        </ul>
      </div>
    </section>

    <section class="slide">
      <h2 class="">What is this presentation about?</h2>
      <ol>
        <li>Problem</li>
        <li>Quick database overview</li>
        <li>Redis intro</li>
        <li>How we use Redis</li>
        <li>Wrap it out</li>
      </ol>
    </section>

    <section class="slide">
      <h2>&nbsp;</h2>
      <h3 class="shout shout-e">
        My team and I are developing a service that manages the client's state inside a meeting.
      </h3>
    </section>

    <section class="slide">
      <center><h2>Video Conference Processor</h2></center>
      <h3 class="shout shout-e">
        My team and I are developing a service that manages the client's state inside a meeting.
      </h3>
    </section>

    <section class="slide">
      <img class="cover w" src="assets/rc/02-rcv.webp" />
    </section>

    <section class="slide">
      <h2 class="shout shout-e">Backend üíö Database</h2>
    </section>

    <section class="slide">
      <h2 class="shout shout-e">Database ü§∑‚Äç‚ôÇÔ∏è</h2>
    </section>

    <section class="slide">
      <h2 class="shout shout-e">Specificity</h2>
    </section>

    <section class="slide">
      <h2>Specificity</h2>
      <ol>
        <li>Highloads</li>
        <li>Response time / latency</li>
        <li>Hierarchical data structure</li>
        <li>Data life cycle &lt; 3 days</li>
      </ol>
    </section>

    <section class="slide">
      <h2>Specificity</h2>
      <ol>
        <li><strong>Highloads</strong></li>
        <li class="unmarked">Response time / latency</li>
        <li class="unmarked">Hierarchical data structure</li>
        <li class="unmarked">Data life cycle &lt; 3 days</li>
      </ol>
    </section>

    <section class="slide">
      <img class="cover h" src="assets/images/grafana/participants.png" />
    </section>

    <section class="slide">
      <img class="cover h" src="assets/images/grafana/rps.png" />
    </section>

    <section class="slide">
      <h2>Specificity</h2>
      <ol>
        <li class="unmarked">Highloads</li>
        <li><strong>Response time / latency</strong></li>
        <!-- For example, let's imagine that the user decided to mute themselves,
         and it would be very strange if this happened with a delay of a second
         after hitting the button -->
        <li class="unmarked">Hierarchical data structure</li>
        <li class="unmarked">Data life cycle &lt; 3 days</li>
      </ol>
    </section>

    <section class="slide">
      <img class="cover h" src="assets/images/grafana/latency-all.png" />
    </section>

    <section class="slide">
      <h2>Specificity</h2>
      <ol>
        <li class="unmarked">Highloads</li>
        <li class="unmarked">Response time / latency</li>
        <li><strong>Hierarchical data structure</strong></li>
        <li class="unmarked">Data life cycle &lt; 3 days</li>
      </ol>
    </section>

    <section class="slide">
      <h2 class="shout shout-e">Meeting ‚Üí Room ‚Üí <br /><br />‚Üí Participant ‚Üí Session ‚Üí Stream</h2>
    </section>

    <section class="slide">
      <h2>Specificity</h2>
      <ol>
        <li class="unmarked">Highloads</li>
        <li class="unmarked">Response time / latency</li>
        <li class="unmarked">Hierarchical data structure</li>
        <li><strong>Data life cycle &lt; 3 days</strong></li>
      </ol>
    </section>

    <section class="slide">
      <h2 class="shout shout-e" style="top: 40%">Database Management System</h2>
      <h3 class="shout shout-e">DBMS</h3>
    </section>

    <section class="slide">
      <h2>Database</h2>
      <ol>
        <li>Relational database (SQL)</li>
        <li>Document-oriented database (NoSQL)</li>
        <li>NewSQL</li>
        <li>Key‚Äìvalue</li>
        <li>Embedded database</li>
        <li>...</li>
      </ol>
    </section>

    <section class="slide">
      <h2>Database</h2>
      <ol>
        <li><strong>Relational database (SQL)</strong></li>
        <li><strong>Document-oriented database (NoSQL)</strong></li>
        <li class="unmarked">NewSQL</li>
        <li class="unmarked">Key‚Äìvalue</li>
        <li class="unmarked">Embedded database</li>
        <li class="unmarked">...</li>
      </ol>
    </section>

    <section class="slide">
      <h2>Database</h2>
      <ol>
        <li class="unmarked">Relational database (SQL)</li>
        <li class="unmarked">Document-oriented database (NoSQL)</li>
        <li class="unmarked">NewSQL</li>
        <li><strong>Key‚Äìvalue</strong></li>
        <li class="unmarked">Embedded database</li>
        <li class="unmarked">...</li>
      </ol>
    </section>

    <section class="slide">
      <h2>Database</h2>
      <ol>
        <li class="unmarked">Relational database (SQL)</li>
        <li class="unmarked">Document-oriented database (NoSQL)</li>
        <li class="unmarked">NewSQL</li>
        <li><strong>Key‚Äìvalue ‚Üí Redis</strong></li>
        <li class="unmarked">Embedded database</li>
        <li class="unmarked">...</li>
      </ol>
    </section>

    <section class="slide">
      <h2>&nbsp;</h2>
      <blockquote>
        <p>
          Redis is an in-memory data store used by millions of developers as a cache, vector
          database, <strong>document database</strong>, streaming engine, and message broker.
        </p>
      </blockquote>
      <img class="cover w-60" src="assets/images/redis-logo.svg" />
    </section>

    <section class="slide">
      <h2 class="shout shout-e">
        <a href="https://survey.stackoverflow.co/2025/technology#1-databases" target="_blank"
          >Stack Overflow 2025 <br /><br />Developer Survey (Databases) üîó</a
        >
      </h2>
    </section>

    <section class="slide rc">
      <img class="cover w" src="assets/images/so.png" alt="stackoverflow developer survey" />
    </section>

    <section class="slide">
      <h2>Redis benefits</h2>
      <ol>
        <li>High performance and speed in-memory storage</li>
        <li>
          Data Structures and Flexibility
          <ul>
            <li>Strings</li>
            <li>Hashes</li>
            <li>Lists</li>
            <li>Sets / Sorted Sets</li>
          </ul>
        </li>

        <li>Scalability and High Availability</li>
      </ol>
    </section>

    <section class="slide">
      <h2>Wishes from our team</h2>
      <ol>
        <li>Performance</li>
        <li>Support for rich data model</li>
        <li>Flat traversal for deeply structured data</li>
        <li>Abstract Redis from business logic</li>
      </ol>
    </section>

    <section class="slide rc">
      <img class="cover h" src="assets/code/r-my-document-class.png" alt="class MyDocument" />
    </section>

    <section class="slide">
      <h2>Analysis of existing solutions</h2>
      <ol>
        <li>
          <a href="https://github.com/redis/redis-om-node" target="_blank">redis-om-node üîó</a>
          <ul>
            <li>OM based on json/hash</li>
            <li>No support for pipelining</li>
          </ul>
        </li>
        <li>
          <a href="https://github.com/maritz/nohm" target="_blank">Nohm üîó</a>
          <ul>
            <li>OM based on hash</li>
            <li>No support for pipelining</li>
          </ul>
        </li>
        <li>ioredis</li>
        <li>node-redis</li>
      </ol>
    </section>

    <section class="slide">
      <h2 class="shout shout-e">Redis pipeline</h2>
    </section>

    <section class="slide">
      <h2>&nbsp;</h2>
      <blockquote>
        Pipelining is not just a way to <strong>reduce the latency cost</strong> associated with the
        round trip time, it actually greatly improves
        <strong>the number of operations you can perform per second</strong> in a given Redis
        server.
      </blockquote>
    </section>

    <section class="slide">
      <h2>Without pipelining</h2>
      <pre>
        <code>Client: INCR X</code>
        <code>Server: 1</code>
        <code>Client: INCR X</code>
        <code>Server: 2</code>
        <code>Client: INCR X</code>
        <code>Server: 3</code>
      </pre>
    </section>

    <section class="slide">
      <h2>With pipelining</h2>
      <pre>
        <code>Client: INCR X</code>
        <code>Client: INCR X</code>
        <code>Client: INCR X</code>
        <code>Server: 1</code>
        <code>Server: 2</code>
        <code>Server: 3</code>
      </pre>
    </section>

    <section class="slide">
      <!-- In this talk, we'll build our understanding of the system from the ground up, starting with
      the smallest components and working our way to the complete architecture. -->
      <h2 class="shout shout-e">Let's code<br /><br />from the ground up</h2>
    </section>

    <section class="slide rc">
      <img class="cover w" src="assets/images/schema-01.png" alt="schema" />
    </section>

    <section class="slide rc">
      <img class="cover w" src="assets/images/schema-02.png" alt="schema" />
    </section>

    <section class="slide">
      <h2 class="shout shout-e">RCommand</h2>
    </section>

    <section class="slide">
      <h2>RCommandConfig</h2>
      <pre>
        <code>&gt; SET mykey1 "10"</code>
        <code>&lt; "OK"</code>
        <code>&gt; INCR mykey1</code>
        <code>&lt; (integer) 11</code>
        <code>&gt; SET mykey2 "1minute" EX 60</code>
        <code>&lt; "OK"</code>
        <code>&gt; DEL mykey1 mykey2 mykey3</code>
        <code>&lt; (integer) 2</code>
      </pre>
    </section>

    <section class="slide">
      <h2>RCommandConfig</h2>
      <div class="columns two">
        <pre>
          <code>&gt; <span class="code-command">SET</span><span class="code-args"> mykey1 "10"</span></code>
          <code>&lt; <span class="code-result">"OK"</span></code>
          <code>&gt; <span class="code-command">INCR</span><span class="code-args"> mykey1</span></code>
          <code>&lt; <span class="code-result">(integer) 11</span></code>
          <code>&gt; <span class="code-command">SET</span><span class="code-args"> mykey2 "1minute" EX 60</span></code>
          <code>&lt; <span class="code-result">"OK"</span></code>
          <code>&gt; <span class="code-command">DEL</span><span class="code-args"> mykey1 mykey2 mykey3</span></code>
          <code>&lt; <span class="code-result">(integer) 2</span></code>
        </pre>
        <span>
          <ul>
            <li>üî¥ - string (commandName)</li>
            <li>üü¢ - Array&lt;RCommandInput&gt;</li>
            <li>üîµ - RCommandCallback&lt;T&gt;</li>
          </ul>
        </span>
      </div>
    </section>

    <section class="slide rc">
      <img class="cover w" src="assets/code/r-command-config.png" alt="type RCommandConfig" />
    </section>

    <section class="slide rc">
      <img class="cover w" src="assets/code/r-command.png" alt="class RCommand" />
    </section>

    <section class="slide">
      <h2 class="shout shout-e">RCommandQueue</h2>
    </section>

    <section class="slide rc">
      <img
        class="cover w"
        src="assets/code/r-command-queue-diagram.png"
        alt="RCommandQueue diagram"
      />
    </section>

    <section class="slide rc">
      <img class="cover h" src="assets/code/r-command-queue.png" alt="class RCommandQueue" />
    </section>

    <section class="slide rc">
      <img class="cover h" src="assets/code/r-loader-simple.png" alt="class RLoader (simple)" />
    </section>

    <section class="slide">
      <h2 class="shout shout-e">RDocument</h2>
    </section>

    <section class="slide rc">
      <img
        class="cover h"
        src="assets/code/r-document-prepare.png"
        alt="interface RDocumentPrepare"
      />
    </section>

    <section class="slide rc">
      <img class="cover w" src="assets/code/r-document-after.png" alt="interface RDocumentAfter" />
    </section>

    <section class="slide rc">
      <img class="cover w" src="assets/code/r-document.png" alt="class RDocument" />
    </section>

    <section class="slide">
      <h2 class="shout shout-e">RLoader</h2>
    </section>

    <section class="slide rc">
      <img class="cover w" src="assets/code/r-loader-crud.png" alt="class RLoader (CRUD)" />
    </section>

    <section class="slide rc">
      <img class="cover h" src="assets/code/r-loader-multi.png" alt="class RLoader (multi)" />
    </section>

    <section class="slide">
      <h2 class="shout shout-e">RDocumentTraverse</h2>
    </section>

    <section class="slide rc">
      <img
        class="cover h"
        src="assets/code/r-document-traverse-tick.png"
        alt="class RDocumentTraverse (tick)"
      />
    </section>

    <section class="slide rc">
      <img
        class="cover w"
        src="assets/code/r-document-traverse-prepare-op.png"
        alt="class RDocumentTraverse (prepareOperation)"
      />
    </section>

    <section class="slide rc">
      <img
        class="cover h"
        src="assets/code/r-document-operation-prepare.png"
        alt="class RDocumentOperation (prepare)"
      />
    </section>

    <section class="slide rc">
      <img
        class="cover h"
        src="assets/code/r-document-prepare.png"
        alt="interface RDocumentPrepare"
      />
    </section>

    <section class="slide rc">
      <img
        class="cover h"
        src="assets/code/r-my-document-save.png"
        alt="class MyDocument (save with loader)"
      />
    </section>

    <section class="slide">
      <h2>JavaScript Decorators</h2>
      <ol>
        <li>
          <a href="https://github.com/tc39/proposal-decorators" target="_blank"
            >Decorators (Stage 3)</a
          >
        </li>
        <li>
          <a href="https://github.com/tc39/proposal-decorator-metadata" target="_blank"
            >Decorator Metadata (Stage 3)</a
          >
        </li>
      </ol>
    </section>

    <section class="slide">
      <h2>Pollyfill for Decorators Metadata</h2>
      <pre>
        <code>// Symbol.metadata pollyfill</code>
        <code>&nbsp; </code>
        <code>if (!Symbol.metadata) {</code>
        <code>  Object.assign(Symbol, { metadata: Symbol.for('Symbol.metadata') });</code>
        <code>}</code>
        <code></code>
      </pre>
    </section>

    <section class="slide rc">
      <img class="cover w" src="assets/code/r-model-hooks.png" alt="type RModelHooks" />
    </section>

    <section class="slide rc">
      <img class="cover h" src="assets/code/r-model.png" alt="abstract class RModel" />
    </section>

    <section class="slide rc">
      <img
        class="cover w"
        src="assets/code/r-raw-string-options.png"
        alt="interface RawStringOptions"
      />
    </section>

    <section class="slide rc">
      <img class="cover h" src="assets/code/r-raw-string.png" alt="decorator @RawString" />
    </section>

    <section class="slide">
      <h2 class="shout shout-e">Compose all to one</h2>
    </section>

    <section class="slide rc">
      <img class="cover h" src="assets/code/r-my-document-class.png" alt="class MyDocument" />
    </section>

    <section class="slide">
      <h2>What else do we have?</h2>
      <ol>
        <li>Various decorators for the RModel</li>
        <li>Transaction support</li>
        <li>Native Redis client-side caching support</li>
        <li>
          Hierarchical data structures can be efficiently managed through flat traversal patterns in
          Redis
        </li>
      </ol>
    </section>

    <!-- <section class="slide rc">
      <img class="cover w" src="assets/code/class-planet-explain-1.png" alt="class Planet" />
    </section>
    <section class="slide rc">
      <img class="cover w" src="assets/code/class-planet-explain-2.png" alt="class Planet" />
    </section>
    <section class="slide rc">
      <img class="cover w" src="assets/code/class-planet-explain-3.png" alt="class Planet" />
    </section>

    <section class="slide rc">
      <img class="cover h" src="assets/code/r-my-document-class.png" alt="class Planet" />
      <sup class="todo">TODO: class Planet</sup>
    </section> -->

    <section class="slide">
      <h2>Takeaways</h2>
      <ol>
        <li>Redis can serve as a primary database for high-performance applications</li>
        <li>
          Custom Redis ORM with pipelining support significantly improves performance compared to
          existing solutions
        </li>
        <li>
          Elegant abstraction of Redis operations from business logic using TypeScript decorators
        </li>
        <li>
          Hierarchical data structures can be efficiently managed through flat traversal patterns in
          Redis
        </li>
      </ol>
    </section>

    <section class="slide">
      <img
        class="cover h"
        src="assets/images/grafana/redis-commands-ps.png"
        alt="redis commands per second"
      />
    </section>

    <section class="slide">
      <img
        class="cover h"
        src="assets/images/grafana/redis-round-trips.png"
        alt="redis commands round trips"
      />
    </section>

    <section class="slide">
      <img
        class="cover h"
        src="assets/images/grafana/redis-round-trips-millis.png"
        alt="redis commands round trips ms"
      />
    </section>

    <section class="slide">
      <h2 class="shout shout-e">Node.js üíö Redis</h2>
    </section>

    <section class="slide">
      <img class="cover h" src="assets/rc/01-bg.jpeg" />
      <img class="rc-logo" src="assets/rc/01-rc-logo.png" />
      <div class="qr-section">
        <div class="qr-left">
          <img src="assets/images/qr-code.svg" alt="QR Code" />
        </div>
        <div class="qr-right">
          <h2>Thank you</h2>
        </div>
      </div>
    </section>

    <footer class="badge">
      <a href="https://github.com/shower/shower">Fork me on GitHub</a>
    </footer>

    <div class="progress"></div>
  </body>
</html>
